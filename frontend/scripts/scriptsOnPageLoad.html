<script>
  async function pageLoad() {
    //loadData(); //projects table underconstruction
    let numberOfErrors = 0;
    let errors = [];

    try {
      runGoogleScriptWithPromises("getActiveUserInformation").then((object) => {
        websiteElements.userEmailWindow.textContent = `welcome: ${object.email}`;
      });
      await getServerAccesInformationForTheUser();

      let projectsInformations = await runGoogleScriptWithPromises(
        "getProjectsInformation"
      );

      let customerList = await runGoogleScriptWithPromises(
        "getListOfTheAllCustomers"
      );

      populateDropDownCustomerList(customerList);
    } catch (error) {
      websiteElements.alertsWindow.textContent = error;
      errors.push(error);
      numberOfErrors += 1;
    }

    if (numberOfErrors == 0) {
      await runOrCloseLoaderWindow(false);
    } else {
      let errorMessage =
        "Please contact with Sebastian Jablecki because there is something wrong with the aplication";
      window.alert(errorMessage);

      console.log(errors);
    }
    clearAlerts(websiteElements.alertsWindow);
  }
</script>
